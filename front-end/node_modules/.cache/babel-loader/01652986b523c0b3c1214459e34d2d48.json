{"ast":null,"code":"var _jsxFileName = \"/Users/RaymondChu/spotify-playlist-generator/front-end/src/components/Main.js\";\nimport React from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\nimport '../Main.css';\nconst spotifyWebApi = new Spotify();\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    const params = this.getHashParams();\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n    this.handlePlaylistName = this.handlePlaylistName.bind(this);\n    this.state = {\n      loggedIn: params.access_token ? true : false,\n      artists: '',\n      tracks: [],\n      trackuri: [],\n      playlistName: '',\n      device_id: '',\n      user_id: ''\n    };\n\n    if (params.access_token) {\n      spotifyWebApi.setAccessToken(params.access_token);\n    }\n  }\n\n  getHashParams() {\n    var hashParams = {};\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n\n    while (e = r.exec(q)) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n\n    return hashParams;\n  }\n\n  componentDidMount() {\n    spotifyWebApi.getMe().then(res => {\n      this.setState({\n        user_id: res.id\n      });\n    });\n  }\n\n  handleSearchChange(event) {\n    this.setState({\n      artists: event.target.value\n    });\n  }\n\n  handleSearchArtistId() {\n    this.setState({\n      tracks: []\n    });\n    let artists = this.state.artists.split(',');\n    artists.map(artistName => spotifyWebApi.searchArtists(artistName).then(res => {\n      let artistId = res.artists.items[0].id;\n      spotifyWebApi.getArtistTopTracks(artistId, \"CA\").then(res => {\n        console.log(res);\n\n        for (let i = 0; i < res.tracks.length; i++) {\n          this.setState(state => {\n            const tracks = state.tracks.concat(res.tracks[i]);\n            const trackuri = state.trackuri.concat(res.tracks[i].uri);\n            return {\n              tracks,\n              trackuri\n            };\n          });\n        }\n      });\n    }));\n  }\n\n  handlePlaylistName(event) {\n    this.setState({\n      playlistName: event.target.value\n    });\n  }\n\n  handleCreatePlaylist() {\n    spotifyWebApi.createPlaylist(this.state.user_id, {\n      name: this.state.playlistName\n    }).then(res => {\n      spotifyWebApi.addTracksToPlaylist(this.state.user_id, res.id, this.state.trackuri);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: '#212121',\n        height: '100vh',\n        width: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, this.state.loggedIn ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"http://localhost:8888\",\n      className: \"loginbutton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, \"CLICK TO LOG IN\")), this.state.loggedIn ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup, {\n      className: \"artistInput\",\n      style: {\n        width: '30%',\n        textDecoration: 'none',\n        borderRadius: '30px',\n        boxSizing: 'border-box'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Prepend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-search\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 37\n      }\n    })))), /*#__PURE__*/React.createElement(FormControl, {\n      style: {\n        outline: 'none',\n        boxShadow: 'none ',\n        border: '1px solid #ccc '\n      },\n      type: \"search\",\n      className: \"artistInput\",\n      placeholder: \"Search\\u2026\",\n      value: this.state.artists,\n      onChange: this.handleSearchChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"\",\n      onClick: () => this.handleSearchArtistId(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }, \"Search top tracks\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"trackslist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    }, this.state.tracks.map(track => /*#__PURE__*/React.createElement(\"li\", {\n      key: track.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: track.album.images[0],\n      style: {\n        width: '100px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 56\n      }\n    }), track.name)))), this.state.tracks.length > 0 ? /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      style: {\n        textAlign: 'center',\n        alignContent: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup, {\n      style: {\n        textAlign: 'center',\n        margin: 'auto',\n        width: '20%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Prepend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-collection-play\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M14.5 13.5h-13A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5zm-13 1A1.5 1.5 0 0 1 0 13V6a1.5 1.5 0 0 1 1.5-1.5h13A1.5 1.5 0 0 1 16 6v7a1.5 1.5 0 0 1-1.5 1.5h-13zM2 3a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11A.5.5 0 0 0 2 3zm2-2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7A.5.5 0 0 0 4 1z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.258 6.563a.5.5 0 0 1 .507.013l4 2.5a.5.5 0 0 1 0 .848l-4 2.5A.5.5 0 0 1 6 12V7a.5.5 0 0 1 .258-.437z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 41\n      }\n    })))), /*#__PURE__*/React.createElement(FormControl, {\n      style: {\n        outline: 'none',\n        boxShadow: 'none ',\n        border: '1px solid #ccc'\n      },\n      type: \"text\",\n      placeholder: \"Playlist Name\",\n      value: this.state.playlistName,\n      onChange: this.handlePlaylistName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.handleCreatePlaylist(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 29\n      }\n    }, \"Create playlist\")) : \"\")) : \"\");\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/Users/RaymondChu/spotify-playlist-generator/front-end/src/components/Main.js"],"names":["React","Spotify","InputGroup","FormControl","spotifyWebApi","Main","Component","constructor","props","params","getHashParams","handleSearchChange","bind","handlePlaylistName","state","loggedIn","access_token","artists","tracks","trackuri","playlistName","device_id","user_id","setAccessToken","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","componentDidMount","getMe","then","res","setState","id","event","target","value","handleSearchArtistId","split","map","artistName","searchArtists","artistId","items","getArtistTopTracks","console","log","i","length","concat","uri","handleCreatePlaylist","createPlaylist","name","addTracksToPlaylist","render","backgroundColor","height","width","paddingTop","textDecoration","borderRadius","boxSizing","outline","boxShadow","border","textAlign","track","album","images","alignContent","margin"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\nimport '../Main.css';\n\nconst spotifyWebApi = new Spotify();\n\nclass Main extends React.Component{\n    constructor(props) {\n        super(props);\n        const params = this.getHashParams();\n\n        this.handleSearchChange = this.handleSearchChange.bind(this);\n        this.handlePlaylistName = this.handlePlaylistName.bind(this);\n\n        this.state = {\n            loggedIn: params.access_token ? true : false,\n            artists: '',\n            tracks: [],\n            trackuri: [],\n            playlistName: '',\n            device_id: '',\n            user_id: '',\n        }\n\n        if (params.access_token) {\n            spotifyWebApi.setAccessToken(params.access_token)\n        }\n    }\n\n    getHashParams() {\n        var hashParams = {};\n        var e, r = /([^&;=]+)=?([^&;]*)/g,\n            q = window.location.hash.substring(1);\n        while ( e = r.exec(q)) {\n            hashParams[e[1]] = decodeURIComponent(e[2]);\n        }\n        return hashParams;\n    }\n\n    componentDidMount() {\n        spotifyWebApi.getMe()\n        .then((res) => {\n            this.setState({\n            user_id: res.id\n            })\n        })\n    }\n\n    handleSearchChange(event) {\n        this.setState({\n            artists: event.target.value\n        })\n    }\n\n    handleSearchArtistId() {\n        this.setState({tracks: []})\n        let artists = this.state.artists.split(',');\n        artists.map(artistName => (\n            spotifyWebApi.searchArtists(artistName) \n            .then((res) => {\n            let artistId = res.artists.items[0].id\n            spotifyWebApi.getArtistTopTracks(artistId, \"CA\")\n            .then((res) => {\n                console.log(res)\n                for (let i = 0; i < res.tracks.length; i++) {\n                this.setState(state => {\n                    const tracks = state.tracks.concat(res.tracks[i])\n                    const trackuri = state.trackuri.concat(res.tracks[i].uri)\n                    return {tracks, trackuri}\n                })\n                }\n            })\n            }) \n        ))\n    }\n    \n    handlePlaylistName(event) {\n        this.setState({\n            playlistName: event.target.value\n        })\n    }\n\n    handleCreatePlaylist() {\n        spotifyWebApi.createPlaylist(this.state.user_id, {name: this.state.playlistName})\n        .then((res) => {\n            spotifyWebApi.addTracksToPlaylist(this.state.user_id, res.id, this.state.trackuri)\n        })\n    }\n\n    render() {\n        return (\n            <div style={{backgroundColor: '#212121', height: '100vh', width: '100%'}}>\n                {this.state.loggedIn ? \"\" : \n                <div style={{paddingTop: '5%'}}>\n                    <a href=\"http://localhost:8888\" className=\"loginbutton\">\n                        CLICK TO LOG IN\n                    </a>\n                </div>\n                }\n                {this.state.loggedIn ? \n                <div className=\"mainForm\">\n                    <form className=\"form\">\n{/*                         <input \n                        type=\"search\"\n                        className=\"artistInput\"\n                        placeholder=\"Search&#x2026;\"\n                        value={this.state.artists} \n                        onChange={this.handleSearchChange}\n                        /> */}\n                        <InputGroup className=\"artistInput\" style={{width: '30%', textDecoration: 'none', borderRadius: '30px', boxSizing: 'border-box'}}>\n                            <InputGroup.Prepend>\n                            <InputGroup.Text>\n                                <svg class=\"bi bi-search\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <path fill-rule=\"evenodd\" d=\"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\"/>\n                                    <path fill-rule=\"evenodd\" d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"/>\n                                </svg>\n                            </InputGroup.Text>\n                            </InputGroup.Prepend>\n                            <FormControl style={{outline: 'none', boxShadow: 'none ', border: '1px solid #ccc '}}\n                                type=\"search\"\n                                className=\"artistInput\"\n                                placeholder=\"Search&#x2026;\"\n                                value={this.state.artists} \n                                onChange={this.handleSearchChange}\n                            />\n                        </InputGroup>\n                        <br/>\n                        <button type=\"\" onClick={() => this.handleSearchArtistId()}>\n                            Search top tracks\n                        </button>\n                    </form>\n\n                    <div style={{textAlign: 'center'}}>\n                        <div className=\"trackslist\">\n                            <ul>\n                                {this.state.tracks.map(track => (\n                                    <li key={track.id}><img src={track.album.images[0]} style={{width: '100px'}}/>{track.name}</li>\n                                ))}\n                            </ul>\n                        </div>\n                        { this.state.tracks.length > 0 ? \n                        <form className=\"form\" style={{textAlign: 'center', alignContent: 'center'}}>\n                    {/*     <input\n                                type=\"text\"\n                                placeholder=\"Playlist Name\"\n                                value={this.state.playlistName}\n                                onChange={this.handlePlaylistName}\n                            />  */}\n                            <InputGroup style={{textAlign: 'center', margin: 'auto', width: '20%'}}>\n                                <InputGroup.Prepend>\n                                <InputGroup.Text>\n                                    <svg class=\"bi bi-collection-play\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path fill-rule=\"evenodd\" d=\"M14.5 13.5h-13A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5zm-13 1A1.5 1.5 0 0 1 0 13V6a1.5 1.5 0 0 1 1.5-1.5h13A1.5 1.5 0 0 1 16 6v7a1.5 1.5 0 0 1-1.5 1.5h-13zM2 3a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11A.5.5 0 0 0 2 3zm2-2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7A.5.5 0 0 0 4 1z\"/>\n                                        <path fill-rule=\"evenodd\" d=\"M6.258 6.563a.5.5 0 0 1 .507.013l4 2.5a.5.5 0 0 1 0 .848l-4 2.5A.5.5 0 0 1 6 12V7a.5.5 0 0 1 .258-.437z\"/>\n                                    </svg>\n                                </InputGroup.Text>\n                                </InputGroup.Prepend>\n                                <FormControl style={{outline: 'none', boxShadow: 'none ', border: '1px solid #ccc'}}\n                                    type=\"text\"\n                                    placeholder=\"Playlist Name\"\n                                    value={this.state.playlistName}\n                                    onChange={this.handlePlaylistName}\n                                />\n                            </InputGroup>\n                            <button onClick={() => this.handleCreatePlaylist()}>\n                            Create playlist\n                            </button>\n                        </form>\n                        : \"\"}\n                    </div>\n                </div> \n                : \"\"}\n            </div>\n        )\n    }\n}\n\nexport default Main"]},"metadata":{},"sourceType":"module"}